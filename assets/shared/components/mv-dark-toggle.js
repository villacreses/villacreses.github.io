import e from"./mv-boolean-toggle.js";const t="data-mv-theme";class s extends e{static get inputId(){return"mv-dark-toggle"}get uncheckedClass(){return"fa-solid fa-sun"}get checkedClass(){return"fa-solid fa-moon"}get accessibleTextContent(){return"Toggle dark mode"}constructor(){super();const e=s.userPrefersDark();this.input.checked=e,s.rootClass=e,this.syncAcrossSessions()}static get storedTheme(){return sessionStorage.getItem(t)||null}static set storedTheme(e){sessionStorage.setItem(t,e?"DARK":"LIGHT")}static set rootClass(e){const t=document.documentElement;t.classList.remove("light-mode","dark-mode"),t.classList.add(e?"dark-mode":"light-mode")}static userPrefersDark(){const{storedTheme:e}=s;return"DARK"===e||null===e&&window.matchMedia("(prefers-color-scheme: dark)").matches}syncAcrossSessions(){window.addEventListener("storage",e=>{e.key===t&&(this.checked="DARK"===e.newValue)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{this.checked=e.matches})}onCheckedStateChange(){s.storedTheme=this.checked,s.rootClass=this.checked}}export default{register:()=>{customElements.define(s.inputId,s)},onpageshow:()=>{const e=s.userPrefersDark(),t=document.querySelector(`${s.inputId} input`);t.checked!==e&&t.click()}};