import e from"./mv-countdown-form.js";import t from"./mv-countdown.js";const r=t.elementTag,o=function(){let e=[];return{entries:()=>[...e],refresh:()=>{e=Array.from(document.querySelectorAll(t.elementTag))}}}(),n=document.getElementById("counter-container");function i(){(JSON.parse(localStorage.getItem(r))||[]).map(({time:r,date:o,title:n})=>new t(e.dateFromFormData({date:o,time:r}),n)),o.refresh()}new MutationObserver(t=>{if(t.reduce((e,{addedNodes:t,removedNodes:r})=>e+t.length+r.length,0)>0){const t=Array.from(n.childNodes).map(t=>({time:e.buildTimestring(t.startTime),date:e.buildDatestring(t.startTime),title:t.title}));localStorage.setItem(r,JSON.stringify(t)),o.refresh()}}).observe(n,{childList:!0,subtree:!1}),document.addEventListener("DOMContentLoaded",()=>{t.register(),e.register(),i()}),setInterval(()=>{const e=Date.now();o.entries().forEach(t=>{t.updateElapsedTime(e)})},1e3);